<% @event.status == 'tenant_to_notify' ? (dest = 'locataire') : (dest = 'bailleur') %>

<div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">
          <%= "Envoi au #{dest}" %>
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <div class="mail-form hide">
          <form>
            <div class="form-group">
              <label for="exampleInputEmail1">
              <p></p>
                <%= "Mail à envoyer à #{@event.lease.owner_email}" %>
              </label>
              <textarea class="form-control" id="exampleTextarea" rows="3" placeholder="Cher monsieur, nous vous contactons pour informer que votre bail                                                (...)"></textarea>
              <small id="emailHelp" class="form-text text-muted">Modifiez le mail ci-dessus si besoin puis envoyez.</small>
            </div>
          </form>
        <%= link_to "Envoyer au #{dest}", event_mail_path(@event), class: 'btn btn-primary', type: "submit" %>
        </div>

        <div class="sending-choices">
          <%= link_to "#", class: 'choice-link' do %>
          <div class="sending-choice text-center" id="maillink">
            <h1 class="mail">Contacter par mail</h1>
            <i class="mail fa fa-envelope" aria-hidden="true"></i>
          </div>
          <% end %>
          <hr>
          <%= link_to "#{@event.id}/letter.pdf", class: 'choice-link', target: 'blank' do %>
          <div class="sending-choice pdf text-center">
            <h1 class="pdf">Générer une lettre</h1>
            <i class="pdf fa fa-file-pdf-o" aria-hidden="true"></i>
          </div>
          <% end %>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
  const tohide = document.getElementsByClassName("sending-choices")[0]
  const toshow = document.getElementsByClassName("mail-form")[0]
  const button = document.getElementById('maillink');
  button.addEventListener("click", function () {
    tohide.classList.add("hide");
    toshow.classList.remove("hide");
  });
</script>
